(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{1109:(e,t,r)=>{"use strict";function n(e){let t=(e||"").toLowerCase();return"admin"===t||"manager"===t||"user"===t||"guest"===t?t:"guest"}function a(e,t){return"public"===t||t.includes(e)}r.d(t,{G:()=>n,z:()=>a})},17611:(e,t,r)=>{"use strict";r.d(t,{$c:()=>g,Iy:()=>m,UC:()=>p});var n=r(57383);let a="access_token",s="refresh_token",o="user_id",i="user_role";var l=r(49641).Buffer;async function c(){let e=new TextEncoder().encode("d376510d93962d354924c88547463f2722b512c5b36449195b2c93883398f625"),t=await crypto.subtle.digest("SHA-256",e);return crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt","decrypt"])}async function d(e){let t=await c(),r=crypto.getRandomValues(new Uint8Array(12)),n=new TextEncoder,a=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,n.encode(e)),s=new Uint8Array(r.byteLength+a.byteLength);return s.set(r,0),s.set(new Uint8Array(a),r.byteLength),(void 0!==l?l.from(s).toString("base64"):btoa(String.fromCharCode(...s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}async function u(e){if(!e)return null;try{let t=await c(),r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/")+"===".slice((e.length+3)%4),r=void 0!==l?l.from(t,"base64"):atob(t);if("string"==typeof r){let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}return new Uint8Array(r)}(e),n=r.slice(0,12),a=r.slice(12),s=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,a);return new TextDecoder().decode(s)}catch(e){return console.warn("Failed to decrypt cookie value",e),null}}var f=r(1109);async function m(){let e=n.A.get(a)||null,t=n.A.get(s)||null,r=n.A.get(o)||null,l=n.A.get(i)||null,c=await u(r),d=await u(l);return{accessToken:await u(e),refreshToken:await u(t),userId:c?parseInt(c,10):null,role:(0,f.G)(d)}}async function p(e){let{accessToken:t,refreshToken:r,userId:l,role:c}=e,u=await d(t),f=await d(r),m=await d(l.toString());if(n.A.set(a,u,{secure:!0,sameSite:"lax"}),n.A.set(s,f,{secure:!0,sameSite:"lax"}),n.A.set(o,m,{secure:!0,sameSite:"lax"}),c){let e=await d(c);n.A.set(i,e,{secure:!0,sameSite:"lax"})}}async function g(){n.A.remove(a),n.A.remove(s),n.A.remove(o),n.A.remove(i)}},24536:(e,t,r)=>{Promise.resolve().then(r.bind(r,86039))},30070:(e,t,r)=>{"use strict";r.d(t,{C5:()=>v,MJ:()=>x,eI:()=>p,lR:()=>g,lV:()=>c,zB:()=>u});var n=r(95155),a=r(12115),s=r(99708),o=r(62177),i=r(34449),l=r(82714);let c=o.Op,d=a.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(o.xI,{...t})})},f=()=>{let e=a.useContext(d),t=a.useContext(m),{getFieldState:r,formState:n}=(0,o.xW)(),s=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},m=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...s}=e,o=a.useId();return(0,n.jsx)(m.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...s})})});p.displayName="FormItem";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:s,formItemId:o}=f();return(0,n.jsx)(l.J,{ref:t,className:(0,i.cn)(s&&"text-destructive",r),htmlFor:o,...a})});g.displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:o,formDescriptionId:i,formMessageId:l}=f();return(0,n.jsx)(s.DX,{ref:t,id:o,"aria-describedby":a?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!a,...r})});x.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:s}=f();return(0,n.jsx)("p",{ref:t,id:s,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let v=a.forwardRef((e,t)=>{let{className:r,children:a,...s}=e,{error:o,formMessageId:l}=f(),c=o?String(null==o?void 0:o.message):a;return c?(0,n.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-sm font-medium text-destructive",r),...s,children:c}):null});v.displayName="FormMessage"},34449:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(52596),a=r(39688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},57383:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>a});var a=function e(t,r){function a(e,a,s){if("undefined"!=typeof document){"number"==typeof(s=n({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in s){if(s[i])o+="; "+i,!0!==s[i]&&(o+="="+s[i].split(";")[0])}return document.cookie=e+"="+t.write(a,e)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var s=r[a].split("="),o=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(n[i]=t.read(o,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},81775:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});let n=(0,r(65453).v)(e=>({role:"guest",isLoaded:!1,setRole:t=>e({role:t}),hydrateFromServer:async()=>{e({role:"guest",isLoaded:!0})}}))},82714:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var n=r(95155),a=r(12115),s=r(40968),o=r(74466),i=r(34449);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.b,{ref:t,className:(0,i.cn)(l(),r),...a})});c.displayName=s.b.displayName},86039:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(95155),a=r(35695),s=r(62177),o=r(90221),i=r(56671),l=r(88482),c=r(89852),d=r(97168),u=r(30070),f=r(17611),m=r(81775),p=r(70927);let g=p.Ik({email:p.Yj().min(1,"Email is required").email("Please enter a valid email"),password:p.Yj().min(6,"Password must be at least 6 characters")});async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await fetch("http://carehomes-dev.eba-8v8h9sbp.us-east-1.elasticbeanstalk.com/api"+e,{...t,headers:{"Content-Type":"application/json",Accept:"application/json","X-Tenant":"first",...t.headers||{}},cache:"no-store"});if(!r.ok){let e=await r.json();throw Error("API error: ".concat(e.message))}return r.json()}let v=async e=>await x("/authorization/login",{method:"POST",body:JSON.stringify(e)});function h(){let e=(0,a.useRouter)(),t=(0,m.n)(e=>e.setRole),r=(0,s.mN)({resolver:(0,o.u)(g),defaultValues:{email:"",password:""},mode:"onSubmit"});async function p(r){try{var n;let a=await v(r);if(!("data"in a)&&(null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.token)){i.oR.error("Login failed");return}let s=null==a?void 0:a.data;if(!s){i.oR.error("Login failed");return}await (0,f.UC)({accessToken:s.plain_text_token,refreshToken:s.plain_text_token,userId:s.tokenable_id,role:"admin"}),t("admin"),e.push("/"),e.refresh()}catch(t){let e=t instanceof Error?t.message:"Login failed";i.oR.error(e)}}let{isSubmitting:x}=r.formState;return(0,n.jsx)("div",{className:"min-h-[100dvh] flex items-center justify-center bg-background p-4",children:(0,n.jsxs)(l.Zp,{className:"w-full max-w-md",children:[(0,n.jsxs)(l.aR,{children:[(0,n.jsx)(l.ZB,{children:"Sign in"}),(0,n.jsx)(l.BT,{children:"Access your care management dashboard"})]}),(0,n.jsx)(l.Wu,{children:(0,n.jsx)(u.lV,{...r,children:(0,n.jsxs)("form",{onSubmit:r.handleSubmit(p),className:"space-y-4",children:[(0,n.jsx)(u.zB,{control:r.control,name:"email",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.eI,{children:[(0,n.jsx)(u.lR,{children:"Email"}),(0,n.jsx)(u.MJ,{children:(0,n.jsx)(c.p,{type:"email",autoComplete:"email",placeholder:"you@example.com",...t})}),(0,n.jsx)(u.C5,{})]})}}),(0,n.jsx)(u.zB,{control:r.control,name:"password",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.eI,{children:[(0,n.jsx)(u.lR,{children:"Password"}),(0,n.jsx)(u.MJ,{children:(0,n.jsx)(c.p,{type:"password",autoComplete:"current-password",...t})}),(0,n.jsx)(u.C5,{})]})}}),(0,n.jsx)(d.$,{type:"submit",className:"w-full",disabled:x,children:x?"Signing inâ€¦":"Sign in"})]})})})]})})}},88482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>i});var n=r(95155),a=r(12115),s=r(34449);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},89852:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(95155),a=r(12115),s=r(34449);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},97168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var n=r(95155),a=r(12115),s=r(99708),o=r(74466),i=r(34449);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...d})});c.displayName="Button"}},e=>{var t=t=>e(e.s=t);e.O(0,[389,571,754,671,441,684,358],()=>t(24536)),_N_E=e.O()}]);